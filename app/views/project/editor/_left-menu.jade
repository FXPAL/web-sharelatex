span(ng-controller="ReferencesController")
	ul.list-unstyled.nav()
		li
			a(ng-click="openReferencesModal()")
				i.fa.fa-file-text-o
				| &nbsp;&nbsp; Mendeley
				
script(type="text/ng-template", id="referencesModalTemplate")

	.modal-header
		button.close(
			type="button"
			data-dismiss="modal"
			ng-click="cancel()"
		) &times;
		h3 #{translate("mendeley_integration")}
	.modal-body
		.alert.alert-danger(ng-show="status.error") #{translate("mendeley_reindex_error")}
	
		.loading(ng-show="!status.error && status.loading")
			i.fa.fa-refresh.fa-spin.fa-fw
			span  #{translate("mendeley_reindexing")}
	
		.success(ng-show="!status.error && status.reindex")
			i.fa.fa-check
			span  #{translate("mendeley_reindex_success")}
	
		div(ng-if="!status.error && !status.loading")
			div(ng-if="status.user.features.mendeley")
				div(ng-if="!status.user.mendeley")
					p #{translate("link_to_mendeley_description")}
					p
						a(href,ng-click="linkAccount()").btn.btn-info #{translate("link_to_mendeley")}

			div(ng-if="!status.user.features.mendeley")
				p.small #{translate("mendeley_sync_description")}
				.alert.alert-info
					p #{translate("mendeley_is_premium")}
					p
						a.btn.btn-info(ng-click="startFreeTrial('mendeley')") #{translate("start_free_trial")}

	.modal-footer()
		button.btn.btn-default(
			ng-click="cancel()",
		)
			span #{translate("close")}
