span(ng-controller="ReferencesSearchController")

script(type="text/ng-template", id="referencesSearchModalTemplate")
	.modal-header
		button.close(
			type="button"
			data-dismiss="modal"
			ng-click="cancel()"
		) &times;
		h3 #{translate("search_references")}
	.modal-body.references-search-modal
		.row
			form.col-md-12.search-form
					input.form-control.text-monospace.query-text(
						ng-model="state.queryText",
						placeholder="Search references...",
						on-enter="doSearch()",
						autofocus="autofocus",
						autocomplete="off",
						ng-keydown="handleInputKeyDown($event)",
						ng-init="setup()"
					)
		div(ng-show="state.searchResults").row.search-results
			.col-md-12
				div(
					ng-repeat="hit in state.searchResults"
					ng-class="{'selected-search-result-hit': $index == state.selectedIndex}"
					ng-mouseenter="selectIndex($index)"
					ng-mouseleave="selectIndex(null)"
					ng-click="acceptSelectedSearchResult()"
				).search-result-hit
					.row
						.col-md-12
							span.hit-title
								| {{hit.Fields.title}}
							span.hit-key.pull-right
								| {{hit.EntryKey}}
					.row
						.col-md-12
							span.hit-author
								| {{hit.Fields.author}}
							span(ng-if="hit.Fields.year").hit-year.small
								| &nbsp;â€” {{hit.Fields.year}}