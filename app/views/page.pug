extends ../../../../app/views/layout

block content
	.content.content-alt(ng-cloak)
		.container.wiki
			.row.template-page-header
				.col-md-8(ng-cloak)

			.row
				.col-xs-3.contents(ng-non-bindable)
					| !{contents.content}

				.col-xs-9.page
					- if(typeof(settings.algolia) != "undefined" && typeof(settings.algolia.indexes) != "undefined" && typeof(settings.algolia.indexes.wiki) != "undefined")
						div(ng-controller="SearchWikiController")
							form.project-search.form-horizontal(role="form")
								.form-group.has-feedback.has-feedback-left
									.col-sm-12
										input.form-control(type='text', ng-model='searchQueryText', ng-keyup='search()', placeholder="Search help library....")
										i.fa.fa-search.form-control-feedback-left
										i.fa.fa-times.form-control-feedback(
											ng-click="clearSearchText()",
											style="cursor: pointer;",
											ng-show="searchQueryText.length > 0"
										)

							.row
								.col-md-12(ng-cloak)
									a(ng-href='{{hit.url}}',ng-repeat='hit in hits').search-result.card.card-thin
										span(ng-bind-html='hit.name')
										div.search-result-content(ng-show="hit.content != ''", ng-bind-html='hit.content')

					.card.row-spaced(ng-controller="LearnController")
						.page-header
							h1(ng-non-bindable) #{title}

						mathjax !{page.content}

block requirejs
	script(type='text/javascript').
		window.requirejs = {
			"paths" : {
				"moment": "libs/#{lib('moment')}",
				"fineuploader": "libs/#{lib('fineuploader')}",
				"main": "#{buildJsPath('main.js', {hashedPath:settings.useMinifiedJs, removeExtension:true})}",
				"libraries": "#{buildJsPath('libraries.js', {hashedPath:settings.useMinifiedJs, removeExtension:true})}",
				"mathjax": "#{buildJsPath('/libs/mathjax/MathJax.js', {cdn:false, qs:{config:'TeX-AMS_HTML'}})}"
			},
			"config":{
				"moment":{
					"noGlobal": true
				}
			}
		};
	script(
		data-main=buildJsPath('main.js', {hashedPath:false}),
		baseurl=fullJsPath,
		src=buildJsPath('libs/require.js', {hashedPath:true})
	)