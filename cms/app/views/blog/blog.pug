extends ../layout

//- Page for the list of all blog posts, 
//- or page for a list of blog posts returned from a tag query
//- TODO: Add pagination

block content_cms
	.row
		.col-xs-12
			.page-header
				if tag
					h1
						a(href="/blog") Blog
					small Posts tagged #{tag}
				else
					h1 Blog

	.blog(ng-cloak)
		ul.blog-list
			//- looping here, but there will only be one item
			//- using the same function as /blog, getAndRenderBlog()
			//- which returns items, but the query for a blog post is based on slug,
			//- so there will only be 1 item
			for post in items
				li.card
					.card-header
						h2
							a(href='/blog/' + post.fields.slug)
								| #{post.fields.title}
					if (post.fields.authorDisplay || post.fields.publishDateDay)
						small Posted
							if (post.fields.authorDisplay)
								|  by #{post.fields.authorDisplay}
							if (post.fields.publishDateDay)
								|  on #{post.fields.publishDateDay} #{post.fields.publishDateMonth} #{post.fields.publishDateYear}
					| !{post.fields.contentPreview}

					a.btn.btn-success(href='/blog/' + post.fields.slug) Read More

					if post.fields.tag
						include _blog_tags