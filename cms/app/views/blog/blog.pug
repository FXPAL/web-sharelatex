extends ../layout

//- Page for the list of all blog posts, 
//- or page for a list of blog posts returned from a tag query
//- TODO: Add pagination

block content_cms
	.row
		.col-xs-12
			.page-header
				if tag
					h1
						a(href="/blog") Blog
					small Posts tagged #{tag}
				else
					h1 Blog

	.blog(ng-cloak ng-controller="CmsController")
		ul.blog-list
			for post in items
				li.card
					.card-header
						h2
							a(href='/blog/' + post.slug)
								| #{post.title}
					if (post.authorDisplay || post.publishDateDay)
						small Posted
							if (post.authorDisplay)
								|  by #{post.authorDisplay}
							if (post.publishDatePretty)
								|  on #{post.publishDatePretty}
					mathjax(delimiter="no-single-dollar") !{post.contentPreview}

					a.btn.btn-success(href='/blog/' + post.slug) Read More

					if post.tag
						include _blog_tags

	script(src=mathJaxPath)