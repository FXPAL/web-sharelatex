extends ../layout
include ./elements/_page_content

//- A page from the CMS
//- This is the model "Page" on the CMS
//- These are for the path /for/_SLUG_ (other paths might be added)

block content_cms
	.row
		.col-xs-12
			.page-header
				h1 #{data.title}

	if data.content
		for c, cIndex in data.content
			//- tabGroupTitle is a required field on CMS but can be opted out of display on site
			if c.fields.tabGroupTitle
				if c.fields.displayTabGroupTitle
					h2 #{c.fields.tabGroupTitle}

				tabset
					for tab, tabIndex in c.fields.tabs
						tab(heading=tab.fields.tabTitle)
							for tabContent in tab.fields.tabContent
								+page_content(tabContent, c.fields.tabs[tabIndex-1], c.fields.tabs[tabIndex-2], c.fields.tabs[tabIndex-3], c.fields.tabs[tabIndex+2])

			else
				+page_content(c, data.content[cIndex-1], data.content[cIndex-2], data.content[cIndex-3], data.content[cIndex+1])
